<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Customer">

    <!-- STG에서 로컬로 이관할 고객 목록 조회 -->
    <select id="selectCustomerList" resultType="egovframework.bat.crm.domain.VehicleInfo">
        SELECT
            CUSTOMER_ID,
            NAME,
            EMAIL,
            PHONE,
            REG_DTTM,
            MOD_DTTM
        FROM MIGSTG.CRM_CUSTOMER
    </select>

    <!-- 로컬 DB에 고객 정보 적재 -->
    <insert id="insertCustomerLocal" parameterType="egovframework.bat.crm.domain.VehicleInfo">
        INSERT INTO CRM_CUSTOMER
            (CUSTOMER_ID, NAME, EMAIL, PHONE, REG_DTTM, MOD_DTTM)
        VALUES
            (#{customerId}, #{name}, #{email}, #{phone}, #{regDttm}, #{modDttm})
        ON DUPLICATE KEY UPDATE
            NAME = VALUES(NAME),
            EMAIL = VALUES(EMAIL),
            PHONE = VALUES(PHONE),
            REG_DTTM = VALUES(REG_DTTM),
            MOD_DTTM = VALUES(MOD_DTTM)
    </insert>

</mapper>
